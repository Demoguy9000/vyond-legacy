<html>
  <head>
    <title>Video Editor</title>
    <script>
      // some of this code was taken from regularspark. but it works here lol :)
      const params = new Proxy(new URLSearchParams(window.location.search), {
        get: (searchParams, prop) => searchParams.get(prop),
      });
      var tutorialReload;
      let themePicker = params.tray;
      let apiServer = params.api || "http://localhost:4343";
      let atn = params.action;
      let mId = params.movieId;
      let res = params.return;
      let tut = params.tutorial;
      let plat = params.platform;
      let wide = params.isWide;
      if (tut == "0") tutorialReload = true;
      var theme;
      switch (themePicker) {
        case "":
        case "null":
        case "undefined": {
          theme = 'retro';
          break;
        }
        case "family": {
          theme = 'custom';
          break;
        }
        default: {
          theme = themePicker;
          break;
        }
      }
      let flashvars = new URLSearchParams({
        appCode: "go",
        ctc: "go",
        isEmbed: 1,
        isLogin: "Y",
        username:"Jerry",
        usemail:"jerryguy69420@gmail.com",
        nextUrl: "http://localhost:4343/",
        tray: theme,
        movieId: params.movieId || "",
        userId:  2292,
        isWide: 0,
        page: "",
        siteId: "go",
        tlang: "en_US",
        ut: 40,
        lid: 7,
        apiserver: "http://localhost:4343/",
        storePath: "http://localhost:4343/static/store/<store>",
        clientThemePath: "http://localhost:4343/477/<client_theme>"
      }).toString();
      function embedObject() {
        document.getElementById('lvm').innerHTML = `<object data="http://localhost:4343/animation/${params.v}/${params.type || "go"}_full.swf" type="application/x-shockwave-flash" id="Studio" width="100%" height="100%"><param name="align" value="middle"><param name="allowScriptAccess" value="always"><param name="allowFullScreen" value="true"><param name="wmode" value="window"><param name="flashvars" value="${flashvars}"><param name="movie" value="http://localhost:4343/animation/${params.v}/${params.type || "go"}_full.swf"></object>`;
      }
      interactiveTutorial = {
        neverDisplay: function() {
          return tutorialReload ? false : true;
        }
      };
      function studioLoaded(arg) {
        console.log(arg)
      }
      function initPreviewPlayer(xml) {
        confirm('Before proceeding, please make sure all your changes have been saved.') && window.open(`${apiServer}/player?movieId=${id}`,'MsgWindow','width=1280,height=723,left='+(screen.width/2-640)+',top='+(screen.height/2-360))
      };
      function exitStudio() {
        window.location=`http://localhost:4343`;
      }
    </script>
  </head>
  <body style="margin:0px" onload="embedObject()"><div id="lvm"></div></body>
</html>
